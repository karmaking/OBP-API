version: "3.8"

services:
  obp-api:
    build:
      context: ../..
      dockerfile: development/docker/Dockerfile
    ports:
      - "8080:8080"
    environment:
      # Set Lift props location to find your props files
      - props.resource.dir=/app/props/
      - JAVA_OPTS=-Drun.mode=production -Dprops.resource.dir=/app/props/
    volumes:
      # Mount the props directory so the container uses your local props files
      - ../../obp-api/src/main/resources/props:/app/props
    extra_hosts:
      # Connect to local Postgres on the host
      # In your config file:
      # db.url=jdbc:postgresql://host.docker.internal:5432/YOUR_DB?user=YOUR_DB_USER&password=YOUR_DB_PASSWORD
      - "host.docker.internal:host-gateway"
